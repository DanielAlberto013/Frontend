<!-- Contenedor de partículas flotantes -->
<div class="particles-container"></div>

<div class="dashboard-container">
  <!-- Topbar Moderno -->
  <header class="topbar">
    <div class="topbar-content">
      <div class="brand-section">
        <div class="logo">
          <div class="logo-icon">
            <i class="fas fa-chart-network"></i>
          </div>
          <div class="logo-text">
            <span class="logo-primary">SistemaFinanzas</span>
            <span class="logo-secondary">ITESCAM</span>
          </div>
        </div>
      </div>

      <div class="user-section" *ngIf="currentUser">
        <div class="user-info">
          <div class="user-avatar">
            {{ currentUser.nombre.charAt(0) }}
          </div>
          <div class="user-details">
            <span class="user-greeting">{{ currentUser.nombre }}</span>
            <span class="user-role">{{ currentUser.role }}</span>
          </div>
        </div>
        
        <div class="dropdown-container">
          <button class="dropdown-trigger" mat-icon-button>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="dropdown-panel">
            <div class="user-profile">
              <div class="profile-avatar">{{ currentUser.nombre.charAt(0) }}</div>
              <div class="profile-info">
                <strong>{{ currentUser.nombre }}</strong>
                <span>{{ currentUser.email }}</span>
                <small class="role-badge">{{ currentUser.role }}</small>
              </div>
            </div>
            <div class="dropdown-actions">
              <button class="action-btn" routerLink="/auth/change-password">
                <i class="fas fa-key"></i>
                Cambiar Contraseña
              </button>
              <button class="action-btn logout" (click)="logout()">
                <i class="fas fa-sign-out-alt"></i>
                Cerrar Sesión
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Contenido Principal -->
  <main class="dashboard-main">
    <!-- Header de Bienvenida -->
    <section class="welcome-section">
      <div class="welcome-content">
        <h1 class="welcome-title">
          Bienvenido de vuelta, {{ currentUser?.nombre }}
          <div class="welcome-underline"></div>
        </h1>
        <p class="welcome-subtitle">Selecciona un módulo para comenzar a gestionar el sistema</p>
      </div>
      <div class="welcome-graphic">
        <div class="graphic-dots"></div>
      </div>
    </section>

    <!-- Grid de Módulos -->
    <section class="modules-grid">
      <div class="module-card" routerLink="/proyectos" [class]="'module-primary'">
        <div class="card-background"></div>
        <div class="card-content">
          <div class="card-icon">
            <i class="fas fa-folder-open"></i>
          </div>
          <div class="card-text">
            <h3>Proyectos</h3>
            <p>Gestiona tus proyectos de investigación</p>
          </div>
          <div class="card-arrow">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>

      <div class="module-card" routerLink="/catalogo" [class]="'module-secondary'">
        <div class="card-background"></div>
        <div class="card-content">
          <div class="card-icon">
            <i class="fas fa-list-alt"></i>
          </div>
          <div class="card-text">
            <h3>Catálogo</h3>
            <p>Consulta el catálogo de artículos</p>
          </div>
          <div class="card-arrow">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>

      <div class="module-card" routerLink="/cotizaciones" [class]="'module-accent'">
        <div class="card-background"></div>
        <div class="card-content">
          <div class="card-icon">
            <i class="fas fa-shopping-cart"></i>
          </div>
          <div class="card-text">
            <h3>Cotizaciones</h3>
            <p>Crea y gestiona tus cotizaciones</p>
          </div>
          <div class="card-arrow">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>

      <div class="module-card" routerLink="/reportes" [class]="'module-warning'">
        <div class="card-background"></div>
        <div class="card-content">
          <div class="card-icon">
            <i class="fas fa-chart-bar"></i>
          </div>
          <div class="card-text">
            <h3 *ngIf="authService.isAdmin() || authService.isRevisor()">Reportes</h3>
            <h3 *ngIf="authService.isDocente()">Crear Ticket</h3>
            <p *ngIf="authService.isAdmin() || authService.isRevisor()">Genera reportes y estadísticas</p>
            <p *ngIf="authService.isDocente()">Genera tickets de tus cotizaciones aprobadas</p>
          </div>
          <div class="card-arrow">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>